<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- displays site properly based on user's device -->

  <link rel="icon" type="image/png" sizes="32x32" href="./images/favicon-32x32.png">
  <link rel="stylesheet" type="text/css" href="style/style.css">
  <title>Frontend Mentor | Advice generator app</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  
</head>
<body>
  <div class="main">
    <div id="advi" class="container">
      <h3 class="id"></h3>
  
      <p class="adv"></p>
      <div class="divider">
        <svg viewbox= "0 0 444 16" width="325" height="16" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path fill="#4F5D74" d="M0 8h196v1H0zM248 8h196v1H248z"/><g transform="translate(212)" fill="#CEE3E9"><rect width="6" height="16" rx="3"/><rect x="14" width="6" height="16" rx="3"/></g></g></svg>
        <!-- <svg id="divi" viewbox= "0 0 444 16"  xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path fill="#4F5D74" d="M0 8h196v1H0zM248 8h196v1H248z"/><g transform="translate(212)" fill="#CEE3E9"><rect width="6" height="16" rx="3"/><rect x="14" width="6" height="16" rx="3"/></g></g></svg> -->
      </div>
      <button class="btn" onclick="advButton()" >
        <svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><path d="M20 0H4a4.005 4.005 0 0 0-4 4v16a4.005 4.005 0 0 0 4 4h16a4.005 4.005 0 0 0 4-4V4a4.005 4.005 0 0 0-4-4ZM7.5 18a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm0-9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm4.5 4.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm4.5 4.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm0-9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill="#202733"/></svg>
      </button>
    </div>
  </div>
  <div class="attribution">
    Challenge by <a href="https://www.frontendmentor.io?ref=challenge" target="_blank">Frontend Mentor</a>. 
    Coded by <a href="#">Zahidi</a>.
  </div>

  <script type="text/javascript">
      var url= "https://62bfe6a7c134cf51cec5c6b0.mockapi.io/fke";
      var advic = new Array();
      let currIndex = 1;
      let currId = advic.id;
      let currAdv = advic.advice;
     
      function getAjax(callback){
        $.ajax({
        method: "GET",
        dataType : 'json',
        async: false,
        cache: false,
        url: url,
        success: callback,
        error: function(error){
          console.log("TOLOL!!!!");
          
        }
      });
      }
      getAjax(function(resp){
        advic.push(...resp);
        // advic = JSON.parse(resp);
      });
      // function disp(){
       
      //   document.querySelector('.id').innerHTML = advic[0].id;
      // document.querySelector('.adv').innerHTML = currAdv[1].id;
      // }
      
     window.onload = function(){
      document.querySelector('.id').innerHTML = `ADVICE #`+advic[0].id;
      document.querySelector('.adv').innerHTML =`"`+ advic[0].advice + `"`;
     } 
     
      cont(currId, currAdv);

      function advButton(i = true){
        currIndex = (currIndex + (i ? 1 : -1)+ advic.length) % advic.length;
        currAdv = advic[currIndex].advice;
        currId = advic[currIndex].id;
        cont(currId, currAdv);
      }

      function cont(currId, currAdv){
      document.querySelector('.id').innerHTML = `ADVICE #`+currId;
      document.querySelector('.adv').innerHTML =`"`+ currAdv + `"`;
  
      }
       
  </script>
</body>
</html>